@using SystemForCoinCollectors.Data
@using SystemForCoinCollectors.Services

@inject ICoinService CoinService

@page "/coin-details/{id:int}"

@if (_coin == null)
{
    <span>Loading...</span>
}
else
{
    string removeString = "wwwroot/";
    string image = "";
    if (_coin.Image.Contains(removeString))
    {
        image = _coin.Image.Substring(removeString.Length - 1);
    }

    <div class="container center">
        <div class="row align-items-center">
            <h3>@_coin.Feature</h3>
        </div>

        <div class="row justify-content-center">
            <div class="col-12 col-md-4">
                <img class="coin-image" src="@image" alt="Coin Image">
            </div>
        </div>
    </div>

    <span class="bold-text">Description:</span>
    <p>@_coin.Description</p>

    <p><span class="bold-text">Issuing volume: </span>@_coin.IssuingVolume</p>
    <p><span class="bold-text">Issuing year: </span>@_coin.IssuingYear</p>
    <p><span class="bold-text">Country: </span>@_coin.Country</p>
}

@code {
    [Parameter]
    public int Id { get; set; }

    private Coin? _coin;

    protected async override Task OnInitializedAsync()
    {
        _coin = await CoinService.GetById(Id);
    }

}
